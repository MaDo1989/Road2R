<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />





    <script src="lib/master.js"></script>

    <script src="../../Scripts/jquery-3.6.0.min.js"></script>
    <script src="../../Scripts/jquery.signalR-2.4.2.min.js"></script>
    <!-- Reference the AUTOGENERATED!!! SignalR hub script (by run time) -->
    <script src="../../signalr/hubs"></script>
    <script>
        let { ajaxCall } = GENERAL.FETCH_DATA;

        $(function () {

            const notification = $.connection.testerHub;

            notification.client.spreadtheWord = function (notification) {
                console.log(notification);
            }

            $.connection.hub.start().done(function () {

                $('#sendTextBtn').click(() => {
                    notification.server.broadCastNotification($('#sendMeOut').val());
                });

            });

            $('#sendTextBtn2').click(() => {
                ajaxCall(
                    'TestServerSideSignalR',
                    '',
                    TestServerSideSignalR_SCB,
                    TestServerSideSignalR_ECB
                );


            });

            const TestServerSideSignalR_SCB = (res) => {console.log('works fine - ', res)}
            const TestServerSideSignalR_ECB = (err) => {console.log(err)}
        })


    </script>
</head>
<body>

    <div>
        <input type="text" id="sendMeOut" />
        <br />
        <button id="sendTextBtn">
            BROADCAST !
        </button>
        <br />
        <br />
        <br />
        <br />
        <button id="sendTextBtn2">
            BROADCAST FROM SERVER TO ALL CLIENTS
        </button>

    </div>


</body>
</html>